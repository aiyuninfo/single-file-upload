!function(){"use strict";function l(){var l={replace:!0,restrict:"EA",template:'<button class="btn btn-primary" type="file" ngf-select="uploadFiles($file, $invalidFiles)" ngf-max-size="3MB"><span class="glyphicon glyphicon-cloud-upload"></span>&nbsp;&nbsp;<span>{{buttonText}}</span>&nbsp;&nbsp;[<span>{{fileName}}</span>]</button>',scope:{uploadUrl:"@",fileUrl:"=",buttonText:"@"},controller:"fileUploadController",link:function(l,e,n,t){}};return l}function e(l,e,n){l.fileName=l.fileUrl?l.fileUrl.substring(l.fileUrl.lastIndexOf("/"),l.fileUrl.length):"",l.uploadFiles=function(t,a){l.f=t,l.errFile=a&&a[0],t&&(t.upload=n.upload({url:l.uploadUrl,data:{file:t}}),t.upload.then(function(n){e(function(){l.fileUrl=n.data[0].path,l.fileName=n.data[0].fileName,t.result=n.data})},function(e){e.status>0&&(l.errorMsg=e.status+": "+e.data)},function(l){t.progress=Math.min(100,parseInt(100*l.loaded/l.total))}))}}angular.module("aiyun.single.file.upload",["ngFileUpload"]).directive("singleFileUpload",l).controller("fileUploadController",e),l.$inject=[],e.$inject=["$scope","$timeout","Upload"]}();